\chapter{Introduction}
\label{chap:1_introduction}
A computer hardware and software combination designed for a particular purpose is an Embedded System (\es). In many cases, \ess operate as part of a bigger system (\eg  agricultural and processing sector equipment, automobiles, medical equipment, or airplanes); moreover, such systems are often subject to tight resource constrains (\eg small battery capacity or limited memory and CPU speeds), a characteristic that has made \es development prone to more challenges compared to traditional software systems.
Nonetheless, the global \ess market is expected to witness notable growth: a recent report evaluated it at $\$$89.1 billion in 2021, an amount that is projected to reach $\$$163.2 billion by 2031, with a compound annual growth rate of 6.5\% \cite{ESSTR2022}. This growth is mostly related to an increase in the demand for advanced driver-assistance systems (in electric and hybrid vehicles) and in the number of \ess-related research and development projects.  

Today, there has yet to be shown which approach is more effective for \ess development; for example, Greening \cite{TDDEC} in his book asserted that embedded developers can benefit from the application of Test-Driven Development (\tdd), an incremental approach to software development in which a developer repeats a short cycle made up of three phases: \textit{Red}, \textit{Green} and \textit{Blue} (or \textit{Refactor}) \cite{TDDByExample}. 
During the \textit{Red} phase, the developer writes a test case for the chunk of functionality to be implemented; since there is no corresponding production code just yet, the test will fail. 
In the \textit{Green} phase, only the code that is strictly required to make the test pass is written; at this point the developer re-runs the test and watches it pass.
Finally, during the \textit{Blue} phase, the implemented code, as well as the respective test cases, is refactored and improved; the developer will then run the tests again, as well as all the previous tests, in order to ensure that the functionality has been kept intact.

\tdd has been conceived to develop “regular” software, and it is claimed to improve software quality as well as developers' productivity \cite{DBLP:reference/se/ErdogmusMJ10}. \ess have all the same challenges of non-embedded systems (\noess), such as poor quality, but add challenges of their own \cite{TDDEC}: one of the most cited differences between embedded and \noess is that embedded code depends on the hardware platform it is/will be deployed to. 
While in principle there is no difference between a dependency on a hardware device and one on a \noess \cite{TDDEC}, dealing with hardware introduces a whole new set of variables to consider during development. Furthermore, the limited resources on which an \es usually operates may make it extremely difficult to properly test the system in its entirety; for example, this may not allow developers to fully deploy the testing infrastructure on the target hardware and thus slowing down further the process by impeding or delaying automation and regression testing.

Over the years, a huge amount of empirical investigations has been conducted to study the claimed effects of \tdd on the development of \noess (\eg \cite{DBLP:journals/software/KaracT18}). So far, however, no investigations have been conducted to assess possible benefits concerning the application of \tdd on the development of \ess. In order to improve our body of knowledge on the matter, and analyze the possible benefits deriving from the application of \tdd in this growing field, as the focus of this thesis we investigate the following primary research question (RQ):

\begin{framed}
\noindent \textbf{RQ.} To what extent does the use of \tdd impact the external quality and developers' productivity of the developed \es?	
\end{framed}

To answer this RQ, we present the results of an empirical assessment made up of two experiments, a controlled one that acts as the baseline for our evaluation, and its replication, conducted to study the impact of the \tdd approach on the implementation of \ess, with the goal of increasing the body of knowledge on the benefit (if any) of this development approach.
The study was conducted with the participation of final year Master's degree students in Computer Science enrolled in the \textit{Embedded Systems} course at the University of Salerno, in Italy. 

In our study, \tdd has been analyzed with respect to a more traditional, test-last, development practice, where test cases are written after the production code; from here onwards, we refer to this traditional way of coding as \notdd. 
Whichever the used approach, for the baseline experiment, and for part of its replication, participants were asked to employ a mocked implementation for the target hardware platform while they developed an \es; these mocked components would intercept commands to and from the device simulating a given usage scenario; this included receiving signals from other sensors, triggering actuators, and overall adopting the implementation details of the hardware platform.
In the replication experiment, the participants had to implement an additional \es with the end goal of replacing the mocks with real hardware components (a number of sensors and actuators) before deploying it on the actual hardware platform they had mocked up to that point, and test their implementation by running a small test suite in real time. 
The logic for all three \ess (two in the baseline and one in the replication study) was deployed targeting a \textit{Raspberry Pi} model 4 board; as for the test cases, for the first two experimental tasks, the acceptance test suites were executed on the mocked implementation on a host developing environment; the same thing happened for the final task, before running a subset of the test suite in the real hardware environment. 

Variations in the replication experiment (task and the experimental procedure) were introduced to validate the results of the baseline experiment and to generalize these results to a more real setting. 
We gathered qualitative data in both experiments to back up the quantitative measurements and to have a better picture of the phenomenon under study. Gathered data suggest that the external quality of the developed \ess and the number of written test cases increase when using \tdd with respect to \notdd, while there is not a substantial difference with respect to the developers' productivity.
Finally, as highlighted by the participants' interviews after the deployment of the final implemented \es, \tdd is considered more difficult to apply in this context.

To end this introduction, we provide the structure for the remaining six chapters of this thesis.
Chapters 2 and 3 act as the foundational knowledge concepts that provide a general overview on the main topics concerning the \tdd methodology and \ess concepts. 
More in detail, Chapter 2 contains an overview on the software testing process, analyzing the main approaches, with a focus on \tdd. 
Similarly, Chapter 3 will provide information on the most characteristic \ess topics, discussing the enabling technologies and implementation challenges, before examining the techniques for testing such systems, including a pipeline proposed to introduce the \tdd cycle into this field.
In Chapter 4, we conduct a review of the literature by surveying relevant previous empirical studies on the application of \tdd, and literature mappings on the current testing methodologies for \ess.
Chapter 5 will contain the detailed explanation of our approach for the definition of the two experiments, and the analysis of the results, while Chapter 6 will focus on our answers to the research questions, the possible implications of this study for both lecturers and researchers, as well as the identified threats to its validity.
Chapter 7 will close our empirical assessment by providing the conclusions to the thesis, along with a discussion on the possible directions the research could take when moving forward in the analysis of \tdd for \es development. This chapter will also provide a section where my personal contribution to this research, as the author of this thesis, will be discussed.

Finally, the appendix of this thesis serves as an extension of the main text and provides additional information on our experimental approach, from the details concerning the experimental tasks, to the questionnaires and interviews conducted with the participation of the students. 
Moreover, the last document provided in the appendix is the article version of this thesis, which we submitted to the 24th International Conference on Agile Software Development \cite{XP2023}.